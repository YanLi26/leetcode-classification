#位运算
来源：http://blog.csdn.net/morewindows/article/details/7354571

##基本操作

| 运算符  | 规则      | 
|:--------:|:---------:|
| &        | 1&1 = 1   |
| \|       | 0\|0 = 0  |
| ^        | 相同为0，不同为1|
| ~        | ~1 = 0    |
| <<       | 高位丢弃，低位补0|
| >>       | 低位丢弃，高位补0（逻辑右移）／高位补符号位（算数右移）|


##常用操作

###判断奇偶（parity check）

末位为0:偶数；为1:奇数

```C++
//even
if ((a & 1) == 0)
```

###交换两数

一个数和自己异或值为0

异或满足交换律

```C++
void Swap(int &a, int &b)  
{  
    if (a != b)  
    {  
        a ^= b;  
        b ^= a;  
        a ^= b;  
    }  
} 
```

###变换符号

取反加1

```C++
~a + 1
```

任何数\^0不变，\^1取反

```C++
(a ^ (-1)) +1
```

###求绝对值

负数取反加1

```C++
int my_abs(int a)  
{  
	//a >> 31 为 0 或 -1
    int i = a >> 31;  
    return ((a ^ i) - i);  
}  
```

##其他应用

###高低位交换

```C++
a = (a >> 8) | (a << 8);
```

###二进制逆序

类似归并排序

每2位为一组，高低位交换 -> 每4位…… -> 每8位…… -> 每16位……

1. 取x的奇数位，偶数位填充为0 x & 0xAAAA
2. 取x的偶数位，奇数位填充为0 x & 0x5555
3. 奇数位右移一位，偶数位左移一位
4. 相或

最右一位为0位

```C++
x = ((x & 0xAAAA) >> 1) | ((x & 0x5555) << 1);
```

```C++
a = ((a & 0xAAAA) >> 1) | ((a & 0x5555) << 1);  
a = ((a & 0xCCCC) >> 2) | ((a & 0x3333) << 2);  
a = ((a & 0xF0F0) >> 4) | ((a & 0x0F0F) << 4);  
a = ((a & 0xFF00) >> 8) | ((a & 0x00FF) << 8);
```

###二进制中1的个数

每2位为一组，组内高低位相加 -> 每4位…… -> 每8位…… -> 每16位……

```C++
a = ((a & 0xAAAA) >> 1) + (a & 0x5555);  
a = ((a & 0xCCCC) >> 2) + (a & 0x3333);  
a = ((a & 0xF0F0) >> 4) + (a & 0x0F0F);  
a = ((a & 0xFF00) >> 8) + (a & 0x00FF); 
```

###缺失的数字

自己与自己异或值为0

异或满足交换律